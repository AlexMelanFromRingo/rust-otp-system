# ü¶Ä Rust –≤–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –ø–∞—Ä–æ–ª–µ–π - –ì–û–¢–û–í–ê!

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–°–æ–∑–¥–∞–Ω–∞ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è** Rust —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—á–µ–±–Ω–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Å–∞ —Å:

### üé® –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π GUI
- –ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –±–∞–∑–µ **egui**
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–µ —Ñ–æ—Ä–º—ã
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (—Ü–≤–µ—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

### üîÑ 100% –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª—ã –æ—Ç —Å—Ç–∞—Ä—ã—Ö Delphi –ø—Ä–æ–≥—Ä–∞–º–º
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É Windows-1251
- ‚úÖ –¢–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –¢–æ—Ç –∂–µ –∞–ª–≥–æ—Ä–∏—Ç–º DES
- ‚úÖ –ú–æ–∂–Ω–æ —Å–º–µ—à–∏–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∏ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏!

### üåê –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å
- Windows 32-bit
- Windows 64-bit
- Linux 64-bit

### üì¶ –î–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
1. **otp_client** - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π
2. **otp_server** - —Å–µ—Ä–≤–µ—Ä –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## üìÇ –ß—Ç–æ –≤ –∞—Ä—Ö–∏–≤–µ

```
otp-system/
‚îú‚îÄ‚îÄ README.md          ‚Üê –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICKSTART.md      ‚Üê –ù–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞!
‚îú‚îÄ‚îÄ EXAMPLES.md        ‚Üê –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ STRUCTURE.md       ‚Üê –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ build.sh           ‚Üê –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ Cargo.toml         ‚Üê Workspace
‚îú‚îÄ‚îÄ client/            ‚Üê –ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ Cargo.toml
‚îÇ   ‚îî‚îÄ‚îÄ src/main.rs
‚îî‚îÄ‚îÄ server/            ‚Üê –ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞
    ‚îú‚îÄ‚îÄ Cargo.toml
    ‚îî‚îÄ‚îÄ src/main.rs
```

---

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å (3 —à–∞–≥–∞)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Rust –≤ WSL2

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
sudo apt install mingw-w64
rustup target add i686-pc-windows-gnu x86_64-pc-windows-gnu x86_64-unknown-linux-gnu
```

### 3. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç—ã

```bash
cd otp-system
./build.sh
```

**–ì–æ—Ç–æ–≤–æ!** Exe —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –≤ `*/target/*/release/`

---

## üí° –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ .exe —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É —Å–æ —Å—Ç–∞—Ä—ã–º–∏ bs1.txt, bs3.txt, database.txt –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ!

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ:

```bash
echo "e2d76510bf24" > bs1.txt
echo "06.05.2007 21:24:30" > bs3.txt
echo "Test_T.T. test AAAAe2d76510bf24 06.05.2007 21:24:30" > database.txt
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç, –≤–≤–µ–¥–∏—Ç–µ PIN `AAAA`, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª—å.
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä, –≤–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω `test` –∏ –ø–∞—Ä–æ–ª—å.
‚úÖ –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω!

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞–¥ –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Delphi –≤–µ—Ä—Å–∏—è | Rust –≤–µ—Ä—Å–∏—è |
|----------|---------------|-------------|
| –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å | ‚ùå –¢–æ–ª—å–∫–æ Windows | ‚úÖ Win + Linux |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç DLL | ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ª–∏–Ω–∫–æ–≤–∞–Ω |
| GUI | ‚ö†Ô∏è –°—Ç–∞—Ä—ã–π —Å—Ç–∏–ª—å | ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π |
| –û—Ç–∫—Ä—ã—Ç—ã–π –∫–æ–¥ | ‚ùå –ë–∏–Ω–∞—Ä–Ω–∏–∫–∏ | ‚úÖ –ü–æ–ª–Ω—ã–π –∏—Å—Ö–æ–¥–Ω–∏–∫ |
| –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤ | ‚úÖ | ‚úÖ |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚ö†Ô∏è –°—Ç–∞—Ä—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä | ‚úÖ Rust –≥–∞—Ä–∞–Ω—Ç–∏–∏ |
| –†–∞–∑–º–µ—Ä | ~400KB | ~3-5MB |

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **README.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤—Å–µ–º—É
- **QUICKSTART.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –Ω–µ—Ç–µ—Ä–ø–µ–ª–∏–≤—ã—Ö
- **EXAMPLES.md** - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- **STRUCTURE.md** - –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Rust 2021 edition** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π —è–∑—ã–∫
- **egui 0.25** - –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π GUI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **DES cipher** - —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å ANSI X9.9
- **encoding_rs** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Windows-1251
- **chrono** - —Ç–æ—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º

### –ê–ª–≥–æ—Ä–∏—Ç–º (–∫–∞–∫ –≤ –º–µ—Ç–æ–¥–∏—á–∫–µ)
1. BS2 = PIN + BS1 (–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è 16 + 48 = 64 –±–∏—Ç–∞)
2. TimeBlock = (CurrentTime - StartTime) –≤ HEX
3. Password = DES_encrypt(TimeBlock, BS2)
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫–Ω–æ–º ¬±N —Å–µ–∫—É–Ω–¥

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π–°–µ–∫—Ä–µ—Ç2 –≤ database.txt

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û**: –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å BS2 = PIN + BS1, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ BS1!

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```
Test_T.T. test AAAAe2d76510bf24 06.05.2007 21:24:30
                ^^^^^^^^^^^^^^^^
                PIN=AAAA + BS1=e2d76510bf24
```

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```
Test_T.T. test e2d76510bf24 06.05.2007 21:24:30
                ^^^^^^^^^^^^
                –¢–æ–ª—å–∫–æ BS1 - –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!
```

### –ö–æ–¥–∏—Ä–æ–≤–∫–∞

–§–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞—é—Ç—Å—è/–ø–∏—à—É—Ç—Å—è –≤ Windows-1251, –ø–æ—ç—Ç–æ–º—É —Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

---

## üéì –î–ª—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–≠—Ç–∞ –≤–µ—Ä—Å–∏—è **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç** –º–µ—Ç–æ–¥–∏—á–∫–µ –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è:
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏–∑ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π
- –ò–∑—É—á–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü–æ–Ω–∏–º–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã DES —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫–æ–Ω

**–ë–æ–Ω—É—Å**: –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏–∑—É—á–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –Ω–∞ Rust –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑–Ω—É—Ç—Ä–∏!

---

## ü§ù –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –õ–Æ–ë–´–ï –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏:

| –ö–ª–∏–µ–Ω—Ç | –°–µ—Ä–≤–µ—Ä | –†–∞–±–æ—Ç–∞–µ—Ç |
|--------|--------|----------|
| Delphi Client.exe | Delphi Server.exe | ‚úÖ |
| Rust otp_client | Rust otp_server | ‚úÖ |
| Delphi Client.exe | Rust otp_server | ‚úÖ |
| Rust otp_client | Delphi Server.exe | ‚úÖ |
| HTML Client.html | HTML Server.html | ‚úÖ |
| HTML Client.html | Rust otp_server | ‚úÖ |
| Rust otp_client | HTML Server.html | ‚úÖ |

–í—Å–µ –≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!

---

## üì¶ –ì–æ—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

–í –ø–∞–ø–∫–µ `/mnt/user-data/outputs/` –≤—ã –Ω–∞–π–¥–µ—Ç–µ:

1. **otp-system/** - —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
2. **otp-system-rust.tar.gz** - –∞—Ä—Ö–∏–≤ –ø—Ä–æ–µ–∫—Ç–∞ (11 KB)

–ê—Ä—Ö–∏–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ - —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç–µ —É —Å–µ–±—è –≤ WSL2!

---

## üéâ –ò—Ç–æ–≥–æ

–£ –≤–∞—Å —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å:
- ‚úÖ –ü–æ–ª–Ω—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –Ω–∞ Rust
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π GUI
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–±–æ—Ä–∫–∏
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–£—Å–ø–µ—Ö–æ–≤ —Å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π! üöÄ**
